{"version":3,"sources":["modules/Game.class.js","scripts/main.js"],"names":["Game","initialState","map","row","board","JSON","parse","stringify","status","score","b","cells","Array","from","document","getElementsByClassName","prep","elem","e","push","i","length","textContent","className","String","newBoard","filter","el","reduce","acum","index","arr","updateScore","renderBoard","createCell","canMove","unshift","column","j","reverse","element","emptyCells","Math","floor","random","col","points","module","exports","game2048","button","querySelector","addEventListener","target","classList","contains","start","replace","checkStatus","restart","st","win","lose","remove","add","key","moveLeft","moveRight","moveUp","moveDown"],"mappings":"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","file":"main.bf6929cc.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\n/**\r\n * This class represents the game.\r\n * Now it has a basic structure, that is needed for testing.\r\n * Feel free to add more props and methods if needed.\r\n */\r\nclass Game {\r\n  /**\r\n   * Creates a new game instance.\r\n   *\r\n   * @param {number[][]} initialState\r\n   * The initial state of the board.\r\n   * @default\r\n   * [[0, 0, 0, 0],\r\n   *  [0, 0, 0, 0],\r\n   *  [0, 0, 0, 0],\r\n   *  [0, 0, 0, 0]]\r\n   *\r\n   * If passed, the board will be initialized with the provided\r\n   * initial state.\r\n   */\r\n\r\n  constructor(\r\n    initialState = [\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n    ],\r\n  ) {\r\n    // eslint-disable-next-line no-console\r\n    // console.log(initialState);\r\n    this.initialState = initialState.map((row) => [...row]);\r\n    this.board = JSON.parse(JSON.stringify(initialState));\r\n    this.status = 'idle';\r\n    this.score = 0;\r\n  }\r\n\r\n  renderBoard(b) {\r\n    const cells = Array.from(document.getElementsByClassName('field-cell'));\r\n\r\n    const prep = [];\r\n\r\n    for (const elem of b) {\r\n      for (const e of elem) {\r\n        prep.push(e);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < cells.length; i++) {\r\n      if (prep[i] === 0) {\r\n        cells[i].textContent = '';\r\n        cells[i].className = 'field-cell';\r\n      }\r\n\r\n      if (prep[i] !== 0) {\r\n        cells[i].textContent = prep[i];\r\n        cells[i].className = `field-cell field-cell--${String(prep[i])}`;\r\n      }\r\n    }\r\n  }\r\n\r\n  moveLeft() {\r\n    if (this.status === 'playing') {\r\n      const newBoard = this.board.map((row) => [...row]);\r\n\r\n      for (let i = 0; i < 4; i++) {\r\n        let row = newBoard[i].filter((el) => el !== 0);\r\n\r\n        row = row.reduce((acum, elem, index, arr) => {\r\n          if (arr[index] === arr[index + 1]) {\r\n            acum.push(elem * 2);\r\n            this.updateScore(elem * 2);\r\n            arr[index + 1] = 0;\r\n          } else if (elem !== 0) {\r\n            acum.push(elem);\r\n          }\r\n\r\n          return acum;\r\n        }, []);\r\n\r\n        while (row.length < 4) {\r\n          row.push(0);\r\n        }\r\n\r\n        newBoard[i] = row;\r\n      }\r\n\r\n      if (JSON.stringify(newBoard) !== JSON.stringify(this.board)) {\r\n        this.board = newBoard;\r\n        this.renderBoard(this.board);\r\n        this.createCell();\r\n      } else {\r\n        this.renderBoard(this.board);\r\n      }\r\n    }\r\n\r\n    this.canMove();\r\n  }\r\n\r\n  moveRight() {\r\n    if (this.status === 'playing') {\r\n      const newBoard = this.board.map((row) => [...row]);\r\n\r\n      for (let i = 0; i < 4; i++) {\r\n        let row = newBoard[i].filter((elem) => elem !== 0);\r\n\r\n        row = row.reduce((acum, elem, index, arr) => {\r\n          if (arr[index] === arr[index + 1]) {\r\n            acum.push(elem * 2);\r\n            this.updateScore(elem * 2);\r\n\r\n            arr[index + 1] = 0;\r\n          } else if (elem !== 0) {\r\n            acum.push(elem);\r\n          }\r\n\r\n          return acum;\r\n        }, []);\r\n\r\n        while (row.length < 4) {\r\n          row.unshift(0);\r\n        }\r\n        newBoard[i] = row;\r\n      }\r\n\r\n      if (JSON.stringify(newBoard) !== JSON.stringify(this.board)) {\r\n        this.board = newBoard;\r\n        this.renderBoard(this.board);\r\n        this.createCell();\r\n      } else {\r\n        this.renderBoard(this.board);\r\n      }\r\n    }\r\n\r\n    this.canMove();\r\n  }\r\n\r\n  moveDown() {\r\n    if (this.status === 'playing') {\r\n      const newBoard = this.board.map((row) => [...row]);\r\n\r\n      for (let i = 0; i < 4; i++) {\r\n        let column = [];\r\n\r\n        for (let j = 0; j < 4; j++) {\r\n          column.push(newBoard[j][i]);\r\n        }\r\n\r\n        column.reverse();\r\n\r\n        column = column.filter((el) => el !== 0);\r\n\r\n        column = column.reduce((acum, element, index, arr) => {\r\n          if (arr[index] === arr[index + 1]) {\r\n            acum.push(element * 2);\r\n            this.updateScore(element * 2);\r\n            arr[index + 1] = 0;\r\n          } else if (element !== 0) {\r\n            acum.push(element);\r\n          }\r\n\r\n          return acum;\r\n        }, []);\r\n\r\n        while (column.length < 4) {\r\n          column.push(0);\r\n        }\r\n\r\n        column.reverse();\r\n\r\n        for (let j = 0; j < 4; j++) {\r\n          newBoard[j][i] = column[j];\r\n        }\r\n      }\r\n\r\n      if (JSON.stringify(newBoard) !== JSON.stringify(this.board)) {\r\n        this.board = newBoard;\r\n        this.renderBoard(this.board);\r\n        this.createCell();\r\n      } else {\r\n        this.renderBoard(this.board);\r\n      }\r\n    }\r\n    this.canMove();\r\n  }\r\n\r\n  moveUp() {\r\n    if (this.status === 'playing') {\r\n      const newBoard = this.board.map((row) => [...row]);\r\n\r\n      for (let i = 0; i < 4; i++) {\r\n        let column = [];\r\n\r\n        for (let j = 0; j < 4; j++) {\r\n          if (newBoard[j][i] !== 0) {\r\n            column.push(newBoard[j][i]);\r\n          }\r\n        }\r\n\r\n        column = column.reduce((acum, element, index, arr) => {\r\n          if (arr[index] === arr[index + 1]) {\r\n            acum.push(element * 2);\r\n            this.updateScore(element * 2);\r\n            arr[index + 1] = 0;\r\n          } else if (element !== 0) {\r\n            acum.push(element);\r\n          }\r\n\r\n          return acum;\r\n        }, []);\r\n\r\n        while (column.length < 4) {\r\n          column.push(0);\r\n        }\r\n\r\n        for (let j = 0; j < 4; j++) {\r\n          newBoard[j][i] = column[j];\r\n        }\r\n      }\r\n\r\n      if (JSON.stringify(newBoard) !== JSON.stringify(this.board)) {\r\n        this.board = newBoard;\r\n        this.renderBoard(this.board);\r\n        this.createCell();\r\n      } else {\r\n        this.renderBoard(this.board);\r\n      }\r\n    }\r\n\r\n    this.canMove();\r\n  }\r\n\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  getScore() {\r\n    return this.score;\r\n  }\r\n\r\n  /**\r\n   * @returns {number[][]}\r\n   */\r\n  getState() {\r\n    return this.board;\r\n  }\r\n\r\n  /**\r\n   * Returns the current game status.\r\n   *\r\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\r\n   *\r\n   * `idle` - the game has not started yet (the initial state);\r\n   * `playing` - the game is in progress;\r\n   * `win` - the game is won;\r\n   * `lose` - the game is lost\r\n   */\r\n  getStatus() {\r\n    return this.status;\r\n  }\r\n\r\n  /**\r\n   * Starts the game.\r\n   */\r\n  start() {\r\n    this.createCell();\r\n    this.createCell();\r\n\r\n    this.status = 'playing';\r\n  }\r\n\r\n  /**\r\n   * Resets the game.\r\n   */\r\n  restart() {\r\n    this.board = JSON.parse(JSON.stringify(this.initialState));\r\n    this.status = 'idle';\r\n    this.score = 0;\r\n\r\n    this.renderBoard(this.board);\r\n  }\r\n\r\n  // Add your own methods here\r\n\r\n  createCell() {\r\n    const emptyCells = [];\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n      for (let j = 0; j < 4; j++) {\r\n        if (this.board[i][j] === 0) {\r\n          emptyCells.push([i, j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (emptyCells.length > 0) {\r\n      const [row, col]\r\n        = emptyCells[Math.floor(Math.random() * emptyCells.length)];\r\n\r\n      this.board[row][col] = Math.random() < 0.9 ? 2 : 4;\r\n      this.renderBoard(this.board);\r\n    }\r\n  }\r\n\r\n  updateScore(points) {\r\n    if (points === 2048) {\r\n      this.status = 'win';\r\n    }\r\n    this.score += points;\r\n  }\r\n\r\n  canMove() {\r\n    for (let row = 0; row < 4; row++) {\r\n      for (let col = 0; col < 4; col++) {\r\n        if (this.board[row][col] === 0) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let row = 0; row < 4; row++) {\r\n      for (let col = 0; col < 3; col++) {\r\n        if (this.board[row][col] === this.board[row][col + 1]) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let col = 0; col < 4; col++) {\r\n      for (let row = 0; row < 3; row++) {\r\n        if (this.board[row][col] === this.board[row + 1][col]) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return (this.status = 'lose');\r\n  }\r\n}\r\n\r\nmodule.exports = Game;\r\n","'use strict';\r\n\r\n// Uncomment the next lines to use your game instance in the browser\r\nimport Game from '../modules/Game.class.js';\r\nimport '../styles/main.scss';\r\n\r\nconst game2048 = new Game();\r\n\r\nconst button = document.querySelector('.button');\r\n\r\nbutton.addEventListener('click', (e) => {\r\n  if (e.target.classList.contains('start')) {\r\n    game2048.start();\r\n    e.target.classList.replace('start', 'restart');\r\n    e.target.textContent = 'Restart';\r\n    checkStatus(game2048.status);\r\n  } else if (e.target.classList.contains('restart')) {\r\n    game2048.restart();\r\n    e.target.classList.replace('restart', 'start');\r\n    e.target.textContent = 'Start';\r\n    score.textContent = game2048.score;\r\n    checkStatus(game2048.status);\r\n  }\r\n});\r\n\r\nconst score = document.querySelector('.game-score');\r\n\r\ndocument.addEventListener('keydown', (e) => {\r\n  if (e.key === 'ArrowLeft') {\r\n    game2048.moveLeft();\r\n    score.textContent = game2048.score;\r\n    checkStatus(game2048.status);\r\n  }\r\n\r\n  if (e.key === 'ArrowRight') {\r\n    game2048.moveRight();\r\n    score.textContent = game2048.score;\r\n    checkStatus(game2048.status);\r\n  }\r\n\r\n  if (e.key === 'ArrowUp') {\r\n    game2048.moveUp();\r\n    score.textContent = game2048.score;\r\n    checkStatus(game2048.status);\r\n  }\r\n\r\n  if (e.key === 'ArrowDown') {\r\n    game2048.moveDown();\r\n    score.textContent = game2048.score;\r\n    checkStatus(game2048.status);\r\n  }\r\n});\r\n\r\nfunction checkStatus(st) {\r\n  const start = document.querySelector('.message.message-start');\r\n  const win = document.querySelector('.message.message-win');\r\n  const lose = document.querySelector('.message.message-lose');\r\n\r\n  if (st === 'win') {\r\n    win.classList.remove('hidden');\r\n    start.classList.add('hidden');\r\n    lose.classList.add('hidden');\r\n  } else if (st === 'lose') {\r\n    lose.classList.remove('hidden');\r\n    start.classList.add('hidden');\r\n    win.classList.add('hidden');\r\n  } else if (st === 'idle' || st === 'playing') {\r\n    start.classList.remove('hidden');\r\n    win.classList.add('hidden');\r\n    lose.classList.add('hidden');\r\n  }\r\n}\r\n"]}